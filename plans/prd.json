[
  {
    "id": "CH-1",
    "category": "chat-history",
    "description": "Auto-save conversation after each exchange",
    "steps": [
      "Send a message and receive a response",
      "Close the dialog",
      "Reopen dialog and check history panel",
      "Verify conversation appears in history list"
    ],
    "passes": true
  },
  {
    "id": "CH-2",
    "category": "chat-history",
    "description": "History panel accessible from dialog header",
    "steps": [
      "Open the dialog",
      "Click history icon (ðŸ“œ) in header",
      "Verify history panel opens",
      "Check panel shows title, date, message count for each conversation"
    ],
    "passes": true
  },
  {
    "id": "CH-3",
    "category": "chat-history",
    "description": "Load previous conversation from history",
    "steps": [
      "Open history panel",
      "Click on a previous conversation",
      "Verify conversation messages load into dialog",
      "Check conversation context is restored"
    ],
    "passes": true
  },
  {
    "id": "CH-4",
    "category": "chat-history",
    "description": "Delete individual conversations from history",
    "steps": [
      "Open history panel",
      "Click delete button on a conversation",
      "Verify conversation is removed from list",
      "Reopen history and confirm deletion persisted"
    ],
    "passes": true
  },
  {
    "id": "CH-5",
    "category": "chat-history",
    "description": "Auto-generate title from first user message",
    "steps": [
      "Start new conversation",
      "Send first message with 60+ characters",
      "Open history panel",
      "Verify title is truncated to ~50 chars with ellipsis"
    ],
    "passes": true
  },
  {
    "id": "CH-6",
    "category": "chat-history",
    "description": "Respect retentionDays setting for cleanup",
    "steps": [
      "Set retentionDays to 1 in settings",
      "Create a conversation",
      "Simulate passage of 2 days (or mock timestamp)",
      "Verify old conversation is auto-deleted on next load"
    ],
    "passes": true
  },
  {
    "id": "CH-7",
    "category": "chat-history",
    "description": "Burn button clears current chat and deletes from history",
    "steps": [
      "Start conversation and send messages",
      "Verify conversation appears in history",
      "Click burn button (ðŸ”¥)",
      "Verify messages cleared from dialog",
      "Open history panel and confirm conversation deleted"
    ],
    "passes": true
  },
  {
    "id": "P-1",
    "category": "personas",
    "description": "Default personas available on first run",
    "steps": [
      "Install extension fresh (clear storage)",
      "Open dialog",
      "Click persona selector",
      "Verify 5 built-in personas: General, Code Helper, Writer, Researcher, Translator"
    ],
    "passes": true
  },
  {
    "id": "P-2",
    "category": "personas",
    "description": "Create custom persona in settings",
    "steps": [
      "Open settings page",
      "Navigate to Personas section",
      "Click 'Add Persona' button",
      "Fill name, description, system prompt, icon",
      "Save and verify persona appears in list"
    ],
    "passes": true
  },
  {
    "id": "P-3",
    "category": "personas",
    "description": "Persona selector in dialog allows switching",
    "steps": [
      "Open dialog",
      "Locate persona selector dropdown",
      "Select different persona",
      "Verify persona icon/name updates",
      "Send message and verify system prompt applied"
    ],
    "passes": true
  },
  {
    "id": "P-4",
    "category": "personas",
    "description": "Persona persists when loading conversation from history",
    "steps": [
      "Select 'Code Helper' persona",
      "Have a conversation",
      "Close dialog",
      "Load conversation from history",
      "Verify 'Code Helper' persona is auto-selected"
    ],
    "passes": true
  },
  {
    "id": "P-5",
    "category": "personas",
    "description": "Edit and delete custom personas in settings",
    "steps": [
      "Open settings, go to Personas",
      "Click edit on custom persona",
      "Modify name and system prompt, save",
      "Verify changes persisted",
      "Click delete on custom persona",
      "Verify persona removed from list"
    ],
    "passes": true
  },
  {
    "id": "P-6",
    "category": "personas",
    "description": "Set default persona for new conversations",
    "steps": [
      "Open settings, go to Personas",
      "Set 'Code Helper' as default",
      "Save settings",
      "Open dialog for new conversation",
      "Verify 'Code Helper' is pre-selected"
    ],
    "passes": true
  },
  {
    "id": "UI-1",
    "category": "ui",
    "description": "History panel styling matches forest theme",
    "steps": [
      "Open history panel",
      "Verify colors match existing dialog (#FAFBF9, #3A5A40, etc)",
      "Check font is Inter",
      "Verify hover states and transitions consistent"
    ],
    "passes": true
  },
  {
    "id": "UI-2",
    "category": "ui",
    "description": "Persona selector compact and unobtrusive",
    "steps": [
      "Open dialog",
      "Verify persona selector doesn't crowd input area",
      "Check dropdown opens cleanly",
      "Verify built-in vs custom personas visually grouped"
    ],
    "passes": true
  },
  {
    "id": "UI-3",
    "category": "ui",
    "description": "Empty history state displayed correctly",
    "steps": [
      "Clear all conversations from storage",
      "Open history panel",
      "Verify empty state message shown",
      "Check message is localized"
    ],
    "passes": true
  },
  {
    "id": "DATA-1",
    "category": "data",
    "description": "Persona interface stored correctly",
    "steps": [
      "Create custom persona",
      "Inspect chrome.storage.local",
      "Verify persona has: id, name, description, systemPrompt, icon, isBuiltIn, createdAt"
    ],
    "passes": true
  },
  {
    "id": "DATA-2",
    "category": "data",
    "description": "Conversation stores personaId",
    "steps": [
      "Select persona and have conversation",
      "Inspect chrome.storage.local",
      "Verify conversation object includes personaId field"
    ],
    "passes": true
  },
  {
    "id": "INT-1",
    "category": "integration",
    "description": "Persona system prompt included in API calls",
    "steps": [
      "Select 'Code Helper' persona",
      "Send a message",
      "Inspect network request to API",
      "Verify system prompt from persona is included"
    ],
    "passes": true
  },
  {
    "id": "INT-2",
    "category": "integration",
    "description": "User system prompt combines with persona prompt",
    "steps": [
      "Set custom system prompt in settings",
      "Select persona with system prompt",
      "Send message",
      "Verify both prompts combined in API call"
    ],
    "passes": true
  },
  {
    "id": "PP-1",
    "category": "personas-page",
    "description": "Dedicated personas page accessible from settings",
    "steps": [
      "Open settings page",
      "Locate 'Manage Personas' link in Personas section",
      "Click link",
      "Verify personas.html page opens"
    ],
    "passes": true
  },
  {
    "id": "PP-2",
    "category": "personas-page",
    "description": "Personas page lists all personas",
    "steps": [
      "Open personas page",
      "Verify built-in personas displayed (General, Code Helper, Writer, Researcher, Translator)",
      "Verify custom personas displayed if any",
      "Check each shows icon, name, description"
    ],
    "passes": true
  },
  {
    "id": "PP-3",
    "category": "personas-page",
    "description": "Create new persona from personas page",
    "steps": [
      "Open personas page",
      "Click 'Add Persona' button",
      "Fill form: name, description, system prompt, icon",
      "Click Save",
      "Verify new persona appears in list"
    ],
    "passes": true
  },
  {
    "id": "PP-4",
    "category": "personas-page",
    "description": "Edit custom persona from personas page",
    "steps": [
      "Open personas page with existing custom persona",
      "Click edit button on custom persona",
      "Modify name and system prompt",
      "Click Save",
      "Verify changes persisted",
      "Reopen page and confirm changes saved"
    ],
    "passes": true
  },
  {
    "id": "PP-5",
    "category": "personas-page",
    "description": "Delete custom persona from personas page",
    "steps": [
      "Open personas page with existing custom persona",
      "Click delete button on custom persona",
      "Confirm deletion in dialog",
      "Verify persona removed from list",
      "Verify persona no longer available in dialog selector"
    ],
    "passes": true
  },
  {
    "id": "PP-6",
    "category": "personas-page",
    "description": "Built-in personas not editable or deletable",
    "steps": [
      "Open personas page",
      "Locate built-in persona (e.g., General)",
      "Verify no edit/delete buttons visible",
      "Or verify edit/delete buttons disabled"
    ],
    "passes": true
  },
  {
    "id": "PP-7",
    "category": "personas-page",
    "description": "Set default persona from personas page",
    "steps": [
      "Open personas page",
      "Click 'Set as default' on a persona",
      "Verify default indicator shows",
      "Open new conversation in dialog",
      "Verify selected persona is pre-selected"
    ],
    "passes": true
  },
  {
    "id": "PP-8",
    "category": "personas-page",
    "description": "Personas page styling matches forest theme",
    "steps": [
      "Open personas page",
      "Verify colors match settings page (#FAFBF9, #3A5A40, etc)",
      "Check font is Inter",
      "Verify consistent styling with rest of extension"
    ],
    "passes": true
  },
  {
    "id": "PP-9",
    "category": "personas-page",
    "description": "Back navigation to settings",
    "steps": [
      "Open personas page from settings",
      "Click back button or link",
      "Verify returns to settings page"
    ],
    "passes": true
  },
  {
    "id": "HP-1",
    "category": "history-page",
    "description": "History page accessible from dialog",
    "steps": [
      "Open dialog",
      "Click history icon in header",
      "Verify history.html page opens in new tab"
    ],
    "passes": true
  },
  {
    "id": "HP-2",
    "category": "history-page",
    "description": "History grouped by date categories",
    "steps": [
      "Open history page with conversations from various dates",
      "Verify groupings: Today, Yesterday, This Week, This Month, Older",
      "Check conversations sorted by date within groups (newest first)"
    ],
    "passes": true
  },
  {
    "id": "HP-3",
    "category": "history-page",
    "description": "History item shows title and metadata",
    "steps": [
      "Open history page",
      "Verify each item shows: title, date/time, message count",
      "Verify persona icon if persona was used"
    ],
    "passes": true
  },
  {
    "id": "HP-4",
    "category": "history-page",
    "description": "View history item expands conversation",
    "steps": [
      "Open history page",
      "Click on history item or 'View' button",
      "Verify conversation expands inline or opens detail view",
      "Check all messages displayed (user and assistant)"
    ],
    "passes": true
  },
  {
    "id": "HP-5",
    "category": "history-page",
    "description": "Continue conversation from history",
    "steps": [
      "Open history page",
      "Click 'Continue' button on history item",
      "Verify conversation loads with input area at bottom",
      "Verify input area reuses same component as dialog"
    ],
    "passes": true
  },
  {
    "id": "HP-6",
    "category": "history-page",
    "description": "Input area functional when continuing",
    "steps": [
      "Continue a conversation from history",
      "Type message in input area",
      "Send message",
      "Verify response streams in",
      "Verify conversation saved/updated"
    ],
    "passes": true
  },
  {
    "id": "HP-7",
    "category": "history-page",
    "description": "Delete history item",
    "steps": [
      "Open history page",
      "Click delete button on history item",
      "Confirm deletion in dialog",
      "Verify item removed from list",
      "Refresh page and confirm deletion persisted"
    ],
    "passes": true
  },
  {
    "id": "HP-8",
    "category": "history-page",
    "description": "Empty state when no history",
    "steps": [
      "Clear all conversations from storage",
      "Open history page",
      "Verify empty state message shown",
      "Check message is localized"
    ],
    "passes": true
  },
  {
    "id": "HP-9",
    "category": "history-page",
    "description": "History page styling matches forest theme",
    "steps": [
      "Open history page",
      "Verify colors match (#FAFBF9, #3A5A40, etc)",
      "Check font is Inter",
      "Verify consistent with settings/personas pages"
    ],
    "passes": true
  },
  {
    "id": "HP-10",
    "category": "history-page",
    "description": "Persona restored when continuing conversation",
    "steps": [
      "Create conversation with Code Helper persona",
      "Close dialog",
      "Open history page and continue that conversation",
      "Verify Code Helper persona active",
      "Send message and verify persona system prompt applied"
    ],
    "passes": true
  },
  {
    "id": "HP-11",
    "category": "history-page",
    "description": "Context toggle available when continuing",
    "steps": [
      "Continue conversation from history page",
      "Verify context toggle present in input area",
      "Toggle context mode",
      "Verify context included in next message"
    ],
    "passes": true
  },
  {
    "id": "HP-12",
    "category": "history-page",
    "description": "Remove history panel from dialog",
    "steps": [
      "Open dialog",
      "Verify no inline history panel exists",
      "Verify history icon opens history page instead"
    ],
    "passes": true
  },
  {
    "id": "UI-4",
    "category": "ui",
    "description": "Persona selector at bottom of dialog",
    "steps": [
      "Open dialog",
      "Verify persona selector is in footer/input area, not header",
      "Verify selector still functional",
      "Check positioning doesn't crowd input controls"
    ],
    "passes": true
  },
  {
    "id": "UI-5",
    "category": "ui",
    "description": "Token counter removed from footer",
    "steps": [
      "Open dialog",
      "Verify no token count displayed in footer/input area",
      "Type message and confirm no token estimation shown"
    ],
    "passes": true
  },
  {
    "id": "ICON-1",
    "category": "icons",
    "description": "Replace dialog icons with glyphs.fyi icons",
    "steps": [
      "Open dialog",
      "Verify history icon uses glyphs.fyi colorful icon",
      "Verify settings icon uses glyphs.fyi colorful icon",
      "Verify close icon uses glyphs.fyi colorful icon",
      "Verify send button icon uses glyphs.fyi colorful icon",
      "Verify clear/burn button icon uses glyphs.fyi colorful icon"
    ],
    "passes": false
  },
  {
    "id": "ICON-2",
    "category": "icons",
    "description": "Replace settings page icons with glyphs.fyi icons",
    "steps": [
      "Open settings page",
      "Verify section icons use glyphs.fyi colorful icons",
      "Verify navigation icons use glyphs.fyi colorful icons",
      "Verify action button icons use glyphs.fyi colorful icons"
    ],
    "passes": false
  },
  {
    "id": "ICON-3",
    "category": "icons",
    "description": "Replace personas page icons with glyphs.fyi icons",
    "steps": [
      "Open personas page",
      "Verify add persona button uses glyphs.fyi icon",
      "Verify edit button uses glyphs.fyi icon",
      "Verify delete button uses glyphs.fyi icon",
      "Verify back navigation uses glyphs.fyi icon"
    ],
    "passes": false
  },
  {
    "id": "ICON-4",
    "category": "icons",
    "description": "Replace history page icons with glyphs.fyi icons",
    "steps": [
      "Open history page",
      "Verify view button uses glyphs.fyi icon",
      "Verify continue button uses glyphs.fyi icon",
      "Verify delete button uses glyphs.fyi icon",
      "Verify date group icons (if any) use glyphs.fyi icons"
    ],
    "passes": false
  },
  {
    "id": "ICON-5",
    "category": "icons",
    "description": "Icons are colorful not monochrome",
    "steps": [
      "Review all glyphs.fyi icons in extension",
      "Verify icons use color variants, not grayscale",
      "Verify colors complement forest theme"
    ],
    "passes": false
  },
  {
    "id": "ICON-6",
    "category": "icons",
    "description": "Context toggle icons updated",
    "steps": [
      "Open dialog",
      "Cycle through context modes",
      "Verify selection/full-page/disabled icons are glyphs.fyi colorful icons"
    ],
    "passes": false
  },
  {
    "id": "FD-1",
    "category": "flat-design",
    "description": "Define flat design color palette",
    "steps": [
      "Create/update CSS variables for flat design",
      "Define solid background colors (no gradients)",
      "Define accent colors for buttons and highlights",
      "Remove all box-shadow definitions",
      "Verify colors accessible (WCAG contrast)"
    ],
    "passes": false
  },
  {
    "id": "FD-2",
    "category": "flat-design",
    "description": "Update dialog component to flat design",
    "steps": [
      "Open dialog",
      "Remove all shadows from header/body/footer",
      "Replace gradient backgrounds with solid colors",
      "Use solid borders instead of shadow effects",
      "Verify flat appearance with clean edges"
    ],
    "passes": false
  },
  {
    "id": "FD-3",
    "category": "flat-design",
    "description": "Update buttons to flat design",
    "steps": [
      "Update send button to flat style",
      "Update clear/burn button to flat style",
      "Update context toggle to flat style",
      "Remove hover shadows, use color change instead",
      "Verify consistent button styling across extension"
    ],
    "passes": false
  },
  {
    "id": "FD-4",
    "category": "flat-design",
    "description": "Update settings page to flat design",
    "steps": [
      "Open settings page",
      "Remove card shadows",
      "Use solid borders for section separation",
      "Flatten input fields and dropdowns",
      "Verify consistent with dialog flat style"
    ],
    "passes": false
  },
  {
    "id": "FD-5",
    "category": "flat-design",
    "description": "Update personas page to flat design",
    "steps": [
      "Open personas page",
      "Remove card shadows from persona items",
      "Flatten action buttons",
      "Use solid background colors",
      "Verify consistent flat appearance"
    ],
    "passes": false
  },
  {
    "id": "FD-6",
    "category": "flat-design",
    "description": "Update history page to flat design",
    "steps": [
      "Open history page",
      "Remove shadows from history items",
      "Flatten date group headers",
      "Flatten action buttons (view/continue/delete)",
      "Verify consistent flat appearance"
    ],
    "passes": false
  },
  {
    "id": "FD-7",
    "category": "flat-design",
    "description": "Update input areas to flat design",
    "steps": [
      "Flatten textarea borders",
      "Remove inner shadows from input fields",
      "Use solid focus states instead of glow",
      "Verify in dialog and history page continue mode"
    ],
    "passes": false
  },
  {
    "id": "WS-1",
    "category": "website",
    "description": "Create website folder structure",
    "steps": [
      "Create /website folder in project root",
      "Create index.html file",
      "Create styles.css file",
      "Create /website/images folder for assets"
    ],
    "passes": false
  },
  {
    "id": "WS-2",
    "category": "website",
    "description": "Create HTML structure with hero section",
    "steps": [
      "Add semantic HTML5 structure",
      "Create hero section with headline",
      "Add tagline about AI assistant in browser",
      "Add placeholder for screenshot hero image",
      "Verify responsive viewport meta tag"
    ],
    "passes": false
  },
  {
    "id": "WS-3",
    "category": "website",
    "description": "Add download buttons for browsers",
    "steps": [
      "Add Firefox download button in hero",
      "Add Chrome download button in hero",
      "Style buttons distinctly with browser icons",
      "Link to respective addon stores (placeholder URLs)",
      "Verify buttons prominent and accessible"
    ],
    "passes": false
  },
  {
    "id": "WS-4",
    "category": "website",
    "description": "Add BYOK selling point section",
    "steps": [
      "Create feature section for BYOK",
      "Add heading: Bring Your Own Key",
      "Explain user controls their API costs",
      "Explain no middleman markup",
      "Add relevant icon or illustration"
    ],
    "passes": false
  },
  {
    "id": "WS-5",
    "category": "website",
    "description": "Add privacy selling point section",
    "steps": [
      "Create feature section for privacy",
      "Add heading: Privacy Friendly",
      "Explain data stored locally only",
      "Explain no telemetry or tracking",
      "Add relevant icon or illustration"
    ],
    "passes": false
  },
  {
    "id": "WS-6",
    "category": "website",
    "description": "Add free/no subscription section",
    "steps": [
      "Create feature section for pricing",
      "Add heading: Free as in Beer",
      "Explain no subscription fees",
      "Explain user pays only API usage",
      "Add relevant icon or illustration"
    ],
    "passes": false
  },
  {
    "id": "WS-7",
    "category": "website",
    "description": "Add history and personas section",
    "steps": [
      "Create feature section for features",
      "Highlight conversation history feature",
      "Highlight personas/roles feature",
      "Explain local storage benefits",
      "Add relevant icons or illustrations"
    ],
    "passes": false
  },
  {
    "id": "WS-8",
    "category": "website",
    "description": "Add screenshot as hero image",
    "steps": [
      "Take screenshot of browser plugin in action",
      "Save to /website/images/screenshot.png",
      "Add to hero section as main visual",
      "Style with appropriate sizing and shadow",
      "Ensure responsive image scaling"
    ],
    "passes": false
  },
  {
    "id": "WS-9",
    "category": "website",
    "description": "Style website with flat design CSS",
    "steps": [
      "Apply flat design principles to website",
      "Use solid colors matching extension theme",
      "No shadows or gradients on elements",
      "Clean typography with Inter font",
      "Verify consistent with extension styling"
    ],
    "passes": false
  },
  {
    "id": "WS-10",
    "category": "website",
    "description": "Make website responsive",
    "steps": [
      "Add mobile-first media queries",
      "Stack feature sections on mobile",
      "Resize hero image appropriately",
      "Ensure download buttons usable on mobile",
      "Test at 320px, 768px, 1024px widths"
    ],
    "passes": false
  },
  {
    "id": "ST-1",
    "category": "selection-tooltip",
    "description": "Add showSelectionTooltip setting to storage",
    "steps": [
      "Add showSelectionTooltip boolean to Settings type",
      "Default to true (tooltip enabled)",
      "Update storage wrapper if needed"
    ],
    "passes": false
  },
  {
    "id": "ST-2",
    "category": "selection-tooltip",
    "description": "Add toggle in settings near keyboard shortcut",
    "steps": [
      "Open settings page",
      "Locate keyboard shortcut section",
      "Add checkbox/toggle for Show Selection Tooltip",
      "Position below or near shortcut setting",
      "Verify toggle saves to storage"
    ],
    "passes": false
  },
  {
    "id": "ST-3",
    "category": "selection-tooltip",
    "description": "Content script respects tooltip setting",
    "steps": [
      "Load showSelectionTooltip from storage in content script",
      "If disabled, skip tooltip creation on text selection",
      "If enabled, show tooltip as normal",
      "Listen for storage changes to update behavior"
    ],
    "passes": false
  },
  {
    "id": "ST-4",
    "category": "selection-tooltip",
    "description": "Tooltip toggle works without reload",
    "steps": [
      "Open settings and disable tooltip",
      "Select text on page without reloading",
      "Verify tooltip does not appear",
      "Enable tooltip in settings",
      "Select text and verify tooltip appears"
    ],
    "passes": false
  }
]
